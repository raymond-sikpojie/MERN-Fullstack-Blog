(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,a){e.exports=a(45)},28:function(e,t,a){},29:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),l=a(1),o=a(6),u=a(3),i=a(2),m=a.n(i),p=a(5);a(28);function d(){return r.a.createElement("div",{className:"loader-main"},r.a.createElement("div",{class:"donut multi"}))}a(29);var f=a(10),E=a.n(f);a(13);function g(){var e=Object(u.g)(),t=localStorage.getItem("postPhoto"),a=JSON.parse(localStorage.getItem("postItem")),c=Object(n.useState)(!1),s=Object(l.a)(c,2),o=s[0],i=s[1],f=Object(n.useState)(""),g=Object(l.a)(f,2),h=g[0],v=g[1],b=JSON.parse(localStorage.getItem("auth-token")),N=b?b.user:"",O=function(e){return e.map((function(e){if(e!==[])return r.a.createElement("div",{key:e.id},r.a.createElement("p",null,r.a.createElement("b",null,e.postedBy.firstName," ",e.postedBy.lastName),r.a.createElement("p",null,new Date(e.createdAt).toLocaleDateString())),r.a.createElement("p",{className:"comment__body"},e.body))}))},j=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={body:h},""!==h){e.next=3;break}return e.abrupt("return",alert("Enter a comment"));case 3:return e.next=5,fetch("/comment/".concat(a._id,"/").concat(N.id),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 5:if(n=e.sent,console.log(n.status),200!==n.status){e.next=13;break}return e.next=10,n.json();case 10:r=e.sent,alert(r.msg),i(!o);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){return r.a.createElement("h3",null,"Comments ",a.comment.length)};return Object(n.useEffect)((function(){O(a.comment),y()}),[]),Object(n.useEffect)((function(){E.a.init({duration:1e3,easing:"ease-in-quad",once:!0})}),[]),r.a.createElement(r.a.Fragment,null,a?r.a.createElement("div",{className:"post__item","data-aos":"fade-up"},r.a.createElement("h2",{className:"title"},a.title),r.a.createElement("p",{className:"author"},"By ".concat(a.postedBy.firstName," ").concat(a.postedBy.lastName)),r.a.createElement("p",{className:"date"},"Posted on ".concat(new Date(a.createdAt).toLocaleDateString())),null!==t?r.a.createElement("img",{src:t,alt:"post",width:"500",height:"500"}):r.a.createElement("div",null),r.a.createElement("p",{className:"body"},a.body),r.a.createElement("em",null,r.a.createElement("div",{className:"tags"},"tags: ",a.tags.map((function(e){return r.a.createElement("span",{key:Math.random()+1},e)})))),r.a.createElement("div",{className:"comments"},a.comment.length>0?r.a.createElement("div",null,y(),r.a.createElement("div",{className:"comment__content"},O(a.comment))):r.a.createElement("h3",null,a.comment.length," Comment"),r.a.createElement("div",{className:"addComment-main"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),N||e.push("/login"),j(),v("")}},r.a.createElement("input",{className:"textarea",type:"textarea",name:"comment",placeholder:"Enter comment",value:h,onChange:function(e){return v(e.target.value)}}),r.a.createElement("input",{className:"post-comment",type:"submit",value:"Post Comment"}))))):r.a.createElement(d,null))}var h=Object(n.createContext)();a(35);function v(){var e=Object(n.useContext)(h).setPostPhoto,t=Object(n.useState)(!0),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)([]),i=Object(l.a)(o,2),f=i[0],g=i[1],v=Object(u.g)(),b=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/posts");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,200===t.status&&(g(a),s(!1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/posts/photo/".concat(a));case 2:if(200!==(n=t.sent).status){t.next=10;break}return t.next=6,n;case 6:r=t.sent,e(r.url),localStorage.removeItem("postPhoto"),localStorage.setItem("postPhoto",r.url);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,fetch("/posts/".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,200===a.status&&(localStorage.removeItem("postItem"),localStorage.setItem("postItem",JSON.stringify(n)),s(!1),v.push("/posts/open"),N(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){b()}),[]),Object(n.useEffect)((function(){E.a.init({duration:1e3,easing:"ease-in-out",once:!0})}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"showallposts-main"},r.a.createElement("h2",null,"Latest Posts"),r.a.createElement("div",null,c?r.a.createElement(d,null):r.a.createElement("div",null,f.map((function(e){return r.a.createElement("div",{className:"show__allposts","data-aos":"fade-up"},r.a.createElement("div",{className:"container",key:e._id},r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"content"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,"".concat(e.body.substring(0,150),"...")),r.a.createElement("p",null,"By ".concat(e.postedBy.firstName," ").concat(e.postedBy.lastName))),r.a.createElement("a",{href:"#",onClick:function(){return O(e._id)}},"Read more"))))}))))))}a(36);function b(){return r.a.createElement("div",{className:"posts-main"},r.a.createElement("div",{className:"posts"},r.a.createElement(v,null)))}a(37);function N(){return Object(n.useEffect)((function(){E.a.init({duration:1e3,easing:"ease-in-quad",once:!0})}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"hero"},r.a.createElement("div",{className:"hero-div"},r.a.createElement("div",{className:"logo-div"},r.a.createElement(o.b,{to:"/login"},"Sign In")),r.a.createElement("div",{className:"hero-container","data-aos":"fade-up"},r.a.createElement("div",{className:"description"},r.a.createElement("h1",{className:"hero-title"},"Daily Journal"),r.a.createElement("p",null,"Document your wildest thoughts. Write about things you love. Talk about those cool stuff that you are most passionate about. Share your ideas with the world. Ramble on about your exciting, new ideas."),r.a.createElement(o.b,{to:"/login"},"Get Started")),r.a.createElement("div",{className:"image floating","data-aos":"fade-left"},r.a.createElement("img",{src:"https://res.cloudinary.com/ds57wvvno/image/upload/v1600891158/hero_ghs3pe.svg",alt:"hero-img"}))))),r.a.createElement("div",{className:"posts"},r.a.createElement("div",null,r.a.createElement(b,null))))}a(38);function O(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],s=JSON.parse(localStorage.getItem("auth-token")),o=s?s.user:"",i=Object(n.useState)(""),f=Object(l.a)(i,2),E=f[0],g=f[1],h=Object(n.useState)(""),v=Object(l.a)(h,2),b=v[0],N=v[1],O=Object(n.useState)(""),j=Object(l.a)(O,2),y=j[0],S=j[1],x=Object(n.useState)(),k=Object(l.a)(x,2),w=k[0],P=k[1],C=Object(u.g)(),_=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),(t=new FormData).append("title",E),t.append("body",b),t.append("tags",y),t.append("photo",w,w.name),e.next=8,fetch("/posts/".concat(o.id),{method:"POST",credentials:"same-origin",body:t});case 8:if(200!==(a=e.sent).status){e.next=17;break}return e.next=12,a.json();case 12:n=e.sent,console.log(n.msg),c(!1),alert(n.msg),C.push("/posts");case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(d,null):r.a.createElement("div",{className:"form-container"},r.a.createElement("h2",{className:"addPost__title"},"Add New Post"),r.a.createElement("form",{id:"post",className:"form",onSubmit:function(e){e.preventDefault(),_(),g(""),N(""),S("")},encType:"multipart/form-data",method:"POST",action:"/posts/:userId"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{id:"post__title",type:"text",name:"title",value:E,required:!0,onChange:function(e){return g(e.target.value)}}),r.a.createElement("label",{htmlFor:"body"},"Body"),r.a.createElement("textarea",{id:"post__body",name:"body",value:b,required:!0,onChange:function(e){return N(e.target.value)}}),r.a.createElement("label",{htmlFor:"body"},"Tags"),r.a.createElement("input",{id:"post__tags",type:"text",name:"tags",placeholder:"separate tags with a comma e.g love, light",value:y,required:!0,onChange:function(e){return S(e.target.value)}}),r.a.createElement("label",{htmlFor:"body"},"Add Photo"),r.a.createElement("input",{id:"add__photo",type:"file",name:"photo",accept:"image/*",onChange:function(e){P(e.target.files[0])}}),r.a.createElement("input",{className:"send-post",type:"submit",value:"Send Post"}))))}a(39);function j(){var e=Object(n.useContext)(h).setLoggedIn,t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(""),d=Object(l.a)(i,2),f=d[0],E=d[1],g=Object(n.useContext)(h).setUserData,v=Object(u.g)(),b=function(){var t=Object(p.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={email:c,password:f},c&&f){t.next=3;break}return t.abrupt("return",alert("All fields are required"));case 3:return t.next=5,fetch("/user/login",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return n=t.sent,t.next=8,n.json();case 8:r=t.sent,200===n.status&&(g({token:r.token,user:r.user}),e(!0),localStorage.setItem("auth-token",JSON.stringify(r)),v.push("/posts"));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(e){e.preventDefault(),b(),s(""),E("")};return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"main"},r.a.createElement("p",{className:"sign",align:"center"},"Sign in"),r.a.createElement("form",{className:"form1",onSubmit:N},r.a.createElement("input",{className:"email",type:"text",align:"center",placeholder:"Email",name:"email",value:c,required:!0,onChange:function(e){return s(e.target.value)}}),r.a.createElement("input",{className:"pass",type:"password",align:"center",placeholder:"Password",name:"password",value:f,required:!0,onChange:function(e){return E(e.target.value)}}),r.a.createElement("a",{href:"#",className:"submit",align:"center",onClick:N},"Sign in"),r.a.createElement("p",{className:"cta",align:"center"},r.a.createElement(o.b,{to:"/register"},"Don't have an account? Sign Up")))))}a(40);function y(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),i=Object(l.a)(s,2),d=i[0],f=i[1],E=Object(n.useState)(""),g=Object(l.a)(E,2),h=g[0],v=g[1],b=Object(n.useState)(""),N=Object(l.a)(b,2),O=N[0],j=N[1],y=Object(u.g)(),S=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={email:a,firstName:d,lastName:h,password:O},a&&d&&h&&O){e.next=3;break}return e.abrupt("return",alert("All fields are required"));case 3:return e.next=5,fetch("/user/register",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 5:return n=e.sent,e.next=8,n.json();case 8:e.sent,200===n.status&&y.push("/login");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){e.preventDefault(),S(),c(""),f(""),v(""),j("")};return r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"main"},r.a.createElement("p",{className:"sign",align:"center"},"Sign up"),r.a.createElement("form",{className:"form1",onSubmit:x},r.a.createElement("input",{className:"firstname",type:"text",align:"center",placeholder:"First name",name:"firstName",required:!0,value:d,onChange:function(e){return f(e.target.value)}}),r.a.createElement("input",{className:"lastname",type:"text",align:"center",placeholder:"Last name",name:"firstName",required:!0,value:h,onChange:function(e){return v(e.target.value)}}),r.a.createElement("input",{className:"email",type:"text",align:"center",placeholder:"Email",name:"email",value:a,required:!0,onChange:function(e){return c(e.target.value)}}),r.a.createElement("input",{className:"pass",type:"password",align:"center",placeholder:"Password",name:"password",value:O,required:!0,onChange:function(e){return j(e.target.value)}}),r.a.createElement("a",{href:"#",className:"submit",align:"center",onClick:x},"Register"),r.a.createElement("p",{className:"cta",align:"center"},r.a.createElement(o.b,{to:"/login"},"Already have an account? Sign In")),r.a.createElement("p",{className:"msg"},"(E-mail will not be verified)"))))}function S(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(l.a)(s,2),i=o[0],f=o[1],g=Object(n.useState)(!1),v=Object(l.a)(g,2),b=v[0],N=v[1],O=Object(n.useContext)(h).setPostPhoto,j=JSON.parse(localStorage.getItem("auth-token")),y=j.user,S=j.token,x=Object(u.g)(),k=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,fetch("/user/".concat(y.id),{headers:{"x-auth-token":S}});case 3:if(200!==(t=e.sent).status){e.next=10;break}return e.next=7,t.json();case 7:a=e.sent,f(a),c(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts/photo/".concat(t));case 2:if(200!==(a=e.sent).status){e.next=8;break}return e.next=6,a;case 6:n=e.sent,O(n.url);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,fetch("/posts/".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,200===a.status&&(c(!1),localStorage.removeItem("postItem"),localStorage.setItem("postItem",JSON.stringify(n)),x.push("/posts/open"),w(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,fetch("/posts/".concat(t,"/").concat(y.id),{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json","x-auth-token":S}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,200===a.status&&(N(!b),c(!1),alert(n.msg));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){k()}),[b]),Object(n.useEffect)((function(){E.a.init({duration:1e3,easing:"ease-in-quad",once:!0})}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"userposts__main"},a?r.a.createElement(d,null):r.a.createElement("div",null,r.a.createElement("h2",{className:"title"},"Your Posts"),r.a.createElement("div",null,r.a.createElement("div",null,""!==i&&i.posts.length>0?i.posts.map((function(e){return r.a.createElement("div",{className:"show__allposts",key:e._id,"data-aos":"fade-up"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"content"},r.a.createElement("div",null,r.a.createElement("h3",null,e.title),r.a.createElement("p",null,"".concat(e.body.substring(0,108),"...")),r.a.createElement("p",null,"Posted by ".concat(e.postedBy.firstName," ").concat(e.postedBy.lastName))),r.a.createElement("div",{className:"links"},r.a.createElement("a",{href:"#",className:"read",onClick:function(){return P(e._id)}},"Open"),r.a.createElement("a",{href:"#",className:"delete",onClick:function(){return C(e._id)}},"Delete"))))))})):r.a.createElement("p",null,"No Posts"))))))}var x=a(21);function k(e){var t=e.component,a=Object(x.a)(e,["component"]),n=JSON.parse(localStorage.getItem("auth-token")),c=n?n.token:"";return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return""!==c?r.a.createElement(t,e):r.a.createElement(u.a,{to:{pathname:"/login"}})}}))}a(41);function w(){var e=Object(n.useContext)(h),t=e.loggedIn,a=e.setLoggedIn,c=null!==localStorage?JSON.parse(localStorage.getItem("auth-token")):null,s=c?c.token:"";return r.a.createElement("div",{className:"nav-main"},r.a.createElement("div",{className:"menu-wrap"},r.a.createElement("input",{type:"checkbox",class:"toggler"}),r.a.createElement("div",{className:"hamburger"},r.a.createElement("div",null)),r.a.createElement("div",{className:"menu"},r.a.createElement("div",null,!0===t||s?r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Home")),r.a.createElement("li",null,r.a.createElement("a",{href:"/posts/new"},"New Post")),r.a.createElement("li",null,r.a.createElement("a",{href:"/user/post"},"Manage My Posts")),r.a.createElement("li",null,r.a.createElement("a",{href:"/",onClick:function(){localStorage.clear(),a(!1)}},"Sign Out")))):r.a.createElement("div",{className:"menu-noToken"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Home")),r.a.createElement("li",null,r.a.createElement("a",{href:"/login"},"Login")))))))}a(42);function P(){return r.a.createElement("div",{className:"footer-main"},"Omogbare Sikpojie ",r.a.createElement("span",null," \xa9"),"2020")}a(43);function C(){return r.a.createElement("div",{className:"not__found"},r.a.createElement("h1",{className:"title"},"Error 404 Page Not Found"))}a(44);function _(){var e=Object(n.useState)({token:"",user:""}),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)({}),i=Object(l.a)(s,2),m=i[0],p=i[1],f=Object(n.useState)(null),E=Object(l.a)(f,2),v=E[0],x=E[1],_=Object(n.useState)(!1),I=Object(l.a)(_,2),D=I[0],J=I[1];return r.a.createElement("div",{className:"app-main"},r.a.createElement(o.a,null,r.a.createElement(h.Provider,{value:{userData:a,setUserData:c,postItem:m,setPostItem:p,postPhoto:v,setPostPhoto:x,loggedIn:D,setLoggedIn:J}},r.a.createElement(w,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:N}),r.a.createElement(u.b,{path:"/loader",component:d}),r.a.createElement(u.b,{path:"/register",component:y}),r.a.createElement(u.b,{path:"/login",component:j}),r.a.createElement(u.b,{path:"/posts/open",component:g}),r.a.createElement(k,{exact:!0,path:"/posts",component:b}),r.a.createElement(k,{path:"/posts/new",component:O}),r.a.createElement(k,{path:"/user/post",component:S}),r.a.createElement(u.b,{path:"*",component:C})))),r.a.createElement(P,null))}s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.ff85f5aa.chunk.js.map